<!DOCTYPE html>
<html>
<head>
    <title>勤怠</title>
    <!-- 他の<head>内の設定を追加 -->
    <img src="https://cdn-icons-png.flaticon.com/512/126/126230.png" class="img-top" alt="カテキョ申請">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.15/dist/tailwind.min.css" rel="stylesheet">
    
</head>

<!-- Tailwind CSSのスタイルを適用 -->
<style>
    body {
        background-color: #98FB98;
    }
    
    .img-top {
        display: block;
        margin: 0 auto;
        max-width: 20%;
        max-height: 20%;
    }

    .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }

    .schedule-card {
        background-color: white;
        border-radius: 0.375rem;
        padding: 1rem;
        margin-bottom: 1rem;
    }
    
    .review-input {
        width: 100%;
        padding: 0.5rem; 
        border: 1px solid #2b6cb0;
        border-radius: 0.375rem;
    }
</style>

<script>
    document.getElementById('search-button').addEventListener('click', function() {
        var selectedYearMonth = document.getElementById('year-month').value;
        window.location.href = "/teacher/<%= current_user.line_id %>/salary?year_month=" + selectedYearMonth;
    });
</script>

<body>
    <div class="container">
        <h1 class="text-3xl font-semibold mb-4 text-center">勤怠</h1>
        
        <!-- ドロップダウンメニューを追加 -->
        <form action="/teacher/<%= current_user.line_id %>/salary" method="get">
            <div class="dropdown-container">
                <select id="year-month" name="year_month">
                    <% (0..11).each do |month_offset| %>
                        <% target_date = Date.today + month_offset.months %>
                        <% year_month = target_date.strftime('%Y-%m') %>
                        <option value="<%= year_month %>"><%= target_date.strftime('%Y年%m月') %></option>
                    <% end %>
                </select>
                <button type="submit" class="ml-2 px-4 py-2 bg-blue-500 text-white rounded">検索</button>
            </div>
        </form>

        <!-- ここにscheduleを表示 -->
        <div class="schedule-card">
            <h2 class="text-xl font-semibold mb-2"><%= params[:year_month] %>の（A先生の）給与明細</h2>
            <table class="table-auto w-full">
                <thead>
                    <tr>
                        <th class="px-4 py-2">日付</th>
                        <th class="px-4 py-2">開始時間</th>
                        <th class="px-4 py-2">終了時間</th>
                        <th class="px-4 py-2">交通費</th>
                        <th class="px-4 py-2">給与</th>
                    </tr>
                </thead>
                <tbody>
                    <% Schedule.all.each do |schedule| %>
                    <%= schedule.parent_id %>
                        <% if schedule.date.strftime('%Y-%m') == params[:year_month] && schedule.parent_id == current_user.line_id %>
                            <tr>
                                <td class="px-4 py-2"><%= schedule.date %></td>
                                <td class="px-4 py-2"><%= schedule.start_time.strftime('%H:%M') %></td>
                                <td class="px-4 py-2"><%= schedule.end_time.strftime('%H:%M') %></td>
                                <td class="px-4 py-2">交通費（未導入）</td>
                                <td class="px-4 py-2">給与（未導入）</td>
                            </tr>
                        <% end %>
                    <% end %>
                </tbody>
            </table>
        </div>
        
    </div>
</body>
</html>
